(this["webpackJsonpcovid-19"]=this["webpackJsonpcovid-19"]||[]).push([[0],{199:function(e,t,a){e.exports=a(346)},204:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},346:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(25),s=a.n(r),c=(a(204),a(205),a(14)),i=a(13),l=a(54),u=a(53);a(206);function d(e){var t=new XMLHttpRequest;return t.open("GET","".concat("https://api.covid19api.com/").concat(e)),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("Accept","application/json"),t}function m(e,t){return new Promise((function(a,n){e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&(200===e.status?a(e.response):n({error:"API ERROR: ".concat(this.status)}))},e.send(t)}))}function f(){var e=new Date;return"".concat(e.getUTCFullYear(),"-").concat(e.getUTCMonth(),"-").concat(e.getUTCDay(),"T").concat(e.getUTCHours(),":").concat(e.getUTCMinutes(),":").concat(e.getUTCSeconds(),"Z")}function h(e){return e.includes("Country")?e:"[]"}var g=a(179),y=a.n(g),p=function(e){return o.a.createElement("div",{className:"dottedSpinner"},o.a.createElement(y.a,{size:20,loading:e.loading,color:"#6ea5ff",css:"margin-top: 20rem"}))},v=(a(211),a(91)),S=(a(212),a(19));a(213);function C(){return sessionStorage.getItem("CURRENT_COUNTRY")}var E=function(e){var t=Object(n.useState)(!1),a=Object(S.a)(t,2),r=a[0],s=a[1];return o.a.createElement("div",{className:"country ".concat(r?"selected":""),onClick:function(){var t,a;t=e.country.ISO2,sessionStorage.setItem("CURRENT_COUNTRY",t),a=e.country,sessionStorage.setItem("CURRENT_COUNTRY_INFO",JSON.stringify(a)),s(!0),e.setCountrySelected(e.country),e.changeView()}},o.a.createElement("img",{alt:"".concat(e.country.ISO2.toLowerCase()),src:"https://www.countryFlags.io/".concat(e.country.ISO2.toLowerCase(),"/shiny/64.png")}),o.a.createElement("span",null,e.country.Country))},w=function(e){return o.a.createElement("div",{className:"countryList"},e.countries.map((function(t,a){return o.a.createElement(E,{setCountrySelected:e.setCountrySelected,closeModal:e.closeModal,key:a,country:t,changeView:e.changeView})})))},N=a(192),O=a(191),M=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state=void 0,n.handleCountryClick=function(e){},n.isValid=function(e,t,a){var n=parseInt(e);return n>=t&&n<=a},n.validateDate=function(e){var t=e.split("-");return 3===t.length&&n.isValid(t[0],2019,2020)&&n.isValid(t[1],1,12)&&n.isValid(t[2],1,31)?{ok:!0,errorMessage:""}:{ok:!1,errorMessage:"Error in date format"}},n.validateHour=function(e){var t=e.split(":");return 3===t.length&&n.isValid(t[0],0,24)&&n.isValid(t[1],0,59)&&n.isValid(t[2],0,59)?{ok:!0,errorMessage:""}:{ok:!1,errorMessage:"Error in hour format"}},n.setFromDate=function(e){var t=n.validateDate(e.target.value);t.ok?n.setState({fromDate:e.target.value}):n.setState({errorMessage:t.errorMessage})},n.setToDate=function(e){var t=n.validateDate(e.target.value);t.ok?n.setState({toDate:e.target.value}):n.setState({errorMessage:t.errorMessage})},n.setFromHours=function(e){var t=n.validateHour(e.target.value);t.ok?n.setState({fromHour:e.target.value}):n.setState({errorMessage:t.errorMessage})},n.setToHours=function(e){var t=n.validateHour(e.target.value);t.ok?n.setState({toHour:e.target.value}):n.setState({errorMessage:t.errorMessage})},n.filterCountry=function(e){var t=n.props.countries;if(""===e.target.value)n.setState({countryFilteredList:t});else{var a=n.state.countryFilteredList;a=t.filter((function(t){return t.Country.toLowerCase().includes(e.target.value.toLowerCase())||t.ISO2.toLowerCase().includes(e.target.value.toLowerCase())})),n.setState({countryFilteredList:a})}},n.state={countryFilteredList:e.countries,loading:!0,selectTimeView:!1,selectCountryView:!0,errorMessage:"",fromDate:"",fromHour:"",toDate:"",toHour:"",stateToSearch:"confirmed"},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.countries;this.setState({countryFilteredList:e})}},{key:"componentWillReceiveProps",value:function(){var e=this.props.countries;this.setState({countryFilteredList:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.show,n=t.onHideModal,r=t.setCountrySelected,s=t.setSelectedTime,c=t.setActualState,i=this.state,l=i.countryFilteredList,u=i.selectCountryView,d=i.selectTimeView,m=i.errorMessage,f=i.fromDate,h=i.fromHour,g=i.toDate,y=i.toHour,p=i.stateToSearch,S=[{value:"confirmed",label:"Confirmed"},{value:"recovered",label:"Recovered"},{value:"deaths",label:"Deaths"}];return o.a.createElement(v.a,{show:a,onHide:n,animation:!0,backdrop:!0,centered:!0},o.a.createElement(v.a.Header,{closeButton:!0},o.a.createElement("div",{className:"header"},o.a.createElement(N.a,{style:{fill:"#8c8c8c"}}),o.a.createElement("span",null,"Countries"))),o.a.createElement(v.a.Body,null,u&&!d&&o.a.createElement("div",{className:"title"},o.a.createElement("span",null,"Please select a country"),o.a.createElement("input",{type:"text",placeholder:"Type a country name",className:"searchCountry",onChange:this.filterCountry})),u&&!d&&o.a.createElement(w,{setCountrySelected:r,closeModal:n,countries:l,changeView:function(){e.setState({selectCountryView:!1,selectTimeView:!0})}}),d&&!u&&o.a.createElement("div",{className:"timeSelection"},o.a.createElement("div",{className:"fromTo"},o.a.createElement("span",null,"From"),o.a.createElement("input",{type:"text",placeholder:"Please type the desire date in the format: YEAR-MONTH-DAY",className:"searchCountry",onBlur:this.setFromDate,onChange:function(){e.setState({errorMessage:""})}}),o.a.createElement("input",{type:"text",placeholder:"Please type the desire hour in the format: HOURS:MINUTES:SECONDS",className:"searchCountry",onBlur:this.setFromHours,onChange:function(){e.setState({errorMessage:""})}})),o.a.createElement("div",{className:"fromTo"},o.a.createElement("span",{className:"padding"},"To"),o.a.createElement("input",{type:"text",placeholder:"Please type the desire date in the format: YEAR-MONTH-DAY",className:"searchCountry",onBlur:this.setToDate,onChange:function(){e.setState({errorMessage:""})}}),o.a.createElement("input",{type:"text",placeholder:"Please type the desire hour in the format: HOURS:MINUTES:SECONDS",className:"searchCountry",onBlur:this.setToHours,onChange:function(){e.setState({errorMessage:""})}})),o.a.createElement("div",{className:"state"},o.a.createElement("span",null,"Select state to search"),o.a.createElement(O.a,{className:"basic-single",classNamePrefix:"select",defaultValue:S[0],name:"State",options:S,onChange:function(t){e.setState({stateToSearch:t.value})}})),""!==m&&o.a.createElement("span",{className:"errorMessage"},m),o.a.createElement("button",{onClick:function(){s({from:"".concat(f,"T").concat(h,"Z"),to:"".concat(g,"T").concat(y,"Z")}),c(p)}},"Get Information"))))}}]),a}(n.Component),T=a(181),b=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={currentCountry:"",currentCountryInfo:{},countryStats:[],isLoading:!0,dataStats:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.selectedCountry,n=t.time,o=t.actualState;(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2019-12-01T00:00:00Z",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f(),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"confirmed";return new Promise((function(o,r){m(d("country/".concat(e,"/status/").concat(n,"?from=").concat(t,"&to=").concat(a)),"").then((function(e){var t=h(e);console.log(t);var a=JSON.parse(t);console.log(a),o(JSON.parse(t))})).catch(r)}))})(a.Slug,n.from?n.from:void 0,n.to?n.to:void 0,""!==o||o?o:void 0).then((function(t){console.log("res",t);var a=[];t.forEach((function(e){console.log(e);var t=parseInt(e.Cases);a.push({x:e.Date,y:t||0})})),console.log(a),e.setState({currentCountry:C(),currentCountryInfo:void sessionStorage.getItem("CURRENT_COUNTRY_INFO"),countryStats:t,dataStats:a,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.dataStats,n=this.props.selectedCountry;return o.a.createElement(o.a.Fragment,null,!t&&o.a.createElement("div",{className:"countryInfo"},o.a.createElement("div",{className:"header"},o.a.createElement("img",{alt:"".concat(n.ISO2.toLowerCase()),src:"https://www.countryFlags.io/".concat(n.ISO2.toLowerCase(),"/shiny/64.png")})),o.a.createElement("div",{className:"body"},o.a.createElement(T.a,{data:[{id:"chart",color:"hsl(326, 70%, 50%)",data:a}],margin:{top:50,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:"transportation",legendOffset:36,legendPosition:"middle"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"count",legendOffset:-40,legendPosition:"middle"},colors:{scheme:"nivo"},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]}))),t&&o.a.createElement(p,{loading:t}))}}]),a}(n.Component),k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={selectedCountry:"all",countries:[],loading:!0,showCountryModal:!1,actualCountry:{Country:"Uruguay",Slug:"uruguay",ISO2:"UY"},countrySelection:!1,dateSelected:!1,timers:{from:"",to:""},actualState:"confirmed"},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;new Promise((function(e,t){m(d("countries"),"").then((function(t){e(t)})).catch(t)})).then((function(t){var a=JSON.parse(t);a=a.sort((function(e,t){return e.Slug>t.Slug?1:e.Slug<t.Slug?-1:0})),e.setState({countries:a,loading:!1,showCountryModal:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.countries,n=t.showCountryModal,r=t.actualCountry,s=t.countrySelection,c=t.dateSelected,i=t.timers,l=t.actualState;return window.onbeforeunload=function(){sessionStorage.clear()},o.a.createElement("div",{className:"main"},o.a.createElement(p,{loading:a.length<0}),a.length>0&&n&&""!==C()&&o.a.createElement(M,{show:n,countries:a,setCountrySelected:function(t){e.setState({actualCountry:t,countrySelection:!0})},onHideModal:function(){e.setState({showCountryModal:!1})},setSelectedTime:function(t){e.setState({timers:t})},setActualState:function(t){e.setState({actualState:t,showCountryModal:!1,dateSelected:!0})}}),s&&c&&o.a.createElement(b,{selectedCountry:r,time:i,actualState:l}))}}]),a}(n.Component);var R=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[199,1,2]]]);
//# sourceMappingURL=main.fd9eae84.chunk.js.map